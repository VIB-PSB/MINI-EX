executor {
    name = 'sge'
    queueSize = 5
}

process.container = "vibpsb/mini-ex:latest"
singularity.enabled = true

params {
	expressionMatrix = "/MINI-EX/example/INPUTS/*_matrix.txt"
	markersOut = "/MINI-EX/example/INPUTS/*_allMarkers.txt"
	cell2clusters = "/MINI-EX/example/INPUTS/*_cells2clusters.txt"
	cluster2ident = "/MINI-EX/example/INPUTS/*_identities.txt"
	TF_list = "/MINI-EX/example/INPUTS/TF_list.txt"
	termsOfInterest = "/MINI-EX/example/INPUTS/GOsIwant.txt"
//	termsOfInterest = null
	
	featureFile_motifs = "/MINI-EX/data_ath/ath_featureFile_ensemble_top4000top7000.out.gz"
	infoTF = "/MINI-EX/data_ath/ath_TF2fam2mot.txt"
	GOfile = "/MINI-EX/data_ath/ath_full_BP_expcur_ext_names.txt"
	alias = "/MINI-EX/data_ath/ath_gene_aliases.txt"
	
	script_enricher = "/MINI-EX/bin/enricherv2.4"
	script_grnboost = "/MINI-EX/bin/MINIEX_grnboostMultiprocess.py"
	script_motifs = "/MINI-EX/bin/MINIEX_filterForMotifs.py"
	script_topDEGs = "/MINI-EX/bin/MINIEX_selectTopDEGs.py"
	script_expTFs = "/MINI-EX/bin/MINIEX_filterForTFExp.py"
	script_clustermap = "/MINI-EX/bin/MINIEX_clustermap.py"
	script_networkCentrality = "/MINI-EX/bin/MINIEX_network_analysis.py"
	script_checkReference = "/MINI-EX/bin/MINIEX_checkRef.py"
	script_filesEnrichment = "/MINI-EX/bin/MINIEX_makeFilesEnrichment.py"	
	script_makedfRef = "/MINI-EX/bin/MINIEX_makeRankingDf_ref.py"
	script_makedfStd = "/MINI-EX/bin/MINIEX_makeRankingDf_std.py"
	script_makeborda = "/MINI-EX/bin/MINIEX_makeBorda.py"
	script_heatmapTops = "/MINI-EX/bin/MINIEX_visual_heatmap_top150.py"
	
	tops = "700"
	expressionFilter = "10"
	motifFilter = "TF-F_motifs"	
	topRegs = "150"
}

process {
    withName: run_grnboost {
        clusterOptions = '-l h_vmem=15G -pe <pe_name> 5'
    }
    withName: run_enricher_motifs {
        clusterOptions = '-l h_vmem=4G'
    }
    withName: filter_motifs {
        clusterOptions = '-l h_vmem=20G'
    }
    withName: get_topDEGs {
        clusterOptions = '-l h_vmem=10G'
    }
    withName: run_enricher_cluster {
        clusterOptions = '-l h_vmem=4G'
    }
    withName: filter_expression {
        clusterOptions = '-l h_vmem=20G'
    }
    withName: network_centrality {
        clusterOptions = '-l h_vmem=20G'
    }
    withName: getFiles_enrichment {
        clusterOptions = '-l h_vmem=10G'
    }
    withName: GO_enricher {
        clusterOptions = '-l h_vmem=4G'
    }
	withName: check_reference {
        clusterOptions = '-l h_vmem=10G'
    }
    withName: ranking_df_ref {
        clusterOptions = '-l h_vmem=10G'
    }
    withName: ranking_df_std {
        clusterOptions = '-l h_vmem=10G'
    }
    withName: makeBorda {
        clusterOptions = '-l h_vmem=10G'
    }
    withName: heatmap_tops {
        clusterOptions = '-l h_vmem=20G'
    }
    withName: clustermap_regs {
        clusterOptions = '-l h_vmem=20G'
    }
}
